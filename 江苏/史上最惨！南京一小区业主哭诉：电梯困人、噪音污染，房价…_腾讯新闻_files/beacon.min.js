"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

(function (f) {
    if ((typeof exports === "undefined" ? "undefined" : _typeof(exports)) === "object" && typeof module !== "undefined") {
        module.exports = f();
    } else {
        var g;if (typeof window !== "undefined") {
            g = window;
        } else if (typeof global !== "undefined") {
            g = global;
        } else if (typeof self !== "undefined") {
            g = self;
        } else {
            g = this;
        }g.Beacon = f();
    }
})(function () {
    var define, module, exports;return function () {
        function r(e, n, t) {
            function o(i, f) {
                if (!n[i]) {
                    if (!e[i]) {
                        var c = "function" == typeof require && require;if (!f && c) return c(i, !0);if (u) return u(i, !0);var a = new Error("Cannot find module '" + i + "'");throw a.code = "MODULE_NOT_FOUND", a;
                    }var p = n[i] = { exports: {} };e[i][0].call(p.exports, function (r) {
                        var n = e[i][1][r];return o(n || r);
                    }, p, p.exports, r, e, n, t);
                }return n[i].exports;
            }for (var u = "function" == typeof require && require, i = 0; i < t.length; i++) {
                o(t[i]);
            }return o;
        }return r;
    }()({ 1: [function (require, module, exports) {
            !function (t, e) {
                "object" == (typeof exports === "undefined" ? "undefined" : _typeof(exports)) && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : (t = "undefined" != typeof globalThis ? globalThis : t || self).BeaconAction = e();
            }(this, function () {
                "use strict";
                var _t = function t(e, n) {
                    return (_t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) {
                        t.__proto__ = e;
                    } || function (t, e) {
                        for (var n in e) {
                            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                        }
                    })(e, n);
                };var _e = function e() {
                    return (_e = Object.assign || function (t) {
                        for (var e, n = 1, r = arguments.length; n < r; n++) {
                            for (var o in e = arguments[n]) {
                                Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
                            }
                        }return t;
                    }).apply(this, arguments);
                };function n(t, e, n, r) {
                    return new (n || (n = Promise))(function (o, i) {
                        function s(t) {
                            try {
                                u(r.next(t));
                            } catch (t) {
                                i(t);
                            }
                        }function a(t) {
                            try {
                                u(r.throw(t));
                            } catch (t) {
                                i(t);
                            }
                        }function u(t) {
                            var e;t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n(function (t) {
                                t(e);
                            })).then(s, a);
                        }u((r = r.apply(t, e || [])).next());
                    });
                }function r(t, e) {
                    var n,
                        r,
                        o,
                        i,
                        s = { label: 0, sent: function sent() {
                            if (1 & o[0]) throw o[1];return o[1];
                        }, trys: [], ops: [] };return i = { next: a(0), throw: a(1), return: a(2) }, "function" == typeof Symbol && (i[Symbol.iterator] = function () {
                        return this;
                    }), i;function a(i) {
                        return function (a) {
                            return function (i) {
                                if (n) throw new TypeError("Generator is already executing.");for (; s;) {
                                    try {
                                        if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {case 0:case 1:
                                                o = i;break;case 4:
                                                return s.label++, { value: i[1], done: !1 };case 5:
                                                s.label++, r = i[1], i = [0];continue;case 7:
                                                i = s.ops.pop(), s.trys.pop();continue;default:
                                                if (!(o = s.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== i[0] && 2 !== i[0])) {
                                                    s = 0;continue;
                                                }if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                                    s.label = i[1];break;
                                                }if (6 === i[0] && s.label < o[1]) {
                                                    s.label = o[1], o = i;break;
                                                }if (o && s.label < o[2]) {
                                                    s.label = o[2], s.ops.push(i);break;
                                                }o[2] && s.ops.pop(), s.trys.pop();continue;}i = e.call(t, s);
                                    } catch (t) {
                                        i = [6, t], r = 0;
                                    } finally {
                                        n = o = 0;
                                    }
                                }if (5 & i[0]) throw i[1];return { value: i[0] ? i[1] : void 0, done: !0 };
                            }([i, a]);
                        };
                    }
                }var o = "__BEACON_",
                    i = "__BEACON_deviceId",
                    s = "last_report_time",
                    a = "sending_event_ids",
                    u = "beacon_config",
                    c = "beacon_config_request_time",
                    l = function () {
                    function t() {
                        var t = this;this.emit = function (e, n) {
                            if (t) {
                                var r,
                                    o = t.__EventsList[e];if (null == o ? void 0 : o.length) {
                                    o = o.slice();for (var i = 0; i < o.length; i++) {
                                        r = o[i];try {
                                            var s = r.callback.apply(t, [n]);if (1 === r.type && t.remove(e, r.callback), !1 === s) break;
                                        } catch (t) {
                                            throw t;
                                        }
                                    }
                                }return t;
                            }
                        }, this.__EventsList = {};
                    }return t.prototype.indexOf = function (t, e) {
                        for (var n = 0; n < t.length; n++) {
                            if (t[n].callback === e) return n;
                        }return -1;
                    }, t.prototype.on = function (t, e, n) {
                        if (void 0 === n && (n = 0), this) {
                            var r = this.__EventsList[t];if (r || (r = this.__EventsList[t] = []), -1 === this.indexOf(r, e)) {
                                var o = { name: t, type: n || 0, callback: e };return r.push(o), this;
                            }return this;
                        }
                    }, t.prototype.one = function (t, e) {
                        this.on(t, e, 1);
                    }, t.prototype.remove = function (t, e) {
                        if (this) {
                            var n = this.__EventsList[t];if (!n) return null;if (!e) {
                                try {
                                    delete this.__EventsList[t];
                                } catch (t) {}return null;
                            }if (n.length) {
                                var r = this.indexOf(n, e);n.splice(r, 1);
                            }return this;
                        }
                    }, t;
                }();function p(t, e) {
                    for (var n = {}, r = 0, o = Object.keys(t); r < o.length; r++) {
                        var i = o[r],
                            s = t[i];if ("string" == typeof s) n[f(i)] = f(s);else {
                            if (e) throw new Error("value mast be string  !!!!");n[f(String(i))] = f(String(s));
                        }
                    }return n;
                }function f(t) {
                    if ("string" != typeof t) return t;try {
                        return t.replace(new RegExp("\\|", "g"), "%7C").replace(new RegExp("\\&", "g"), "%26").replace(new RegExp("\\=", "g"), "%3D").replace(new RegExp("\\+", "g"), "%2B");
                    } catch (t) {
                        return "";
                    }
                }function h(t) {
                    return String(t.A99) + String(t.A100);
                }var d = function d() {};var v = function () {
                    function t(t) {
                        var n = this;this.lifeCycle = new l(), this.uploadJobQueue = [], this.additionalParams = {}, this.delayTime = 0, this._normalLogPipeline = function (t) {
                            if (!t || !t.reduce || !t.length) throw new TypeError("createPipeline 方法需要传入至少有一个 pipe 的数组");return 1 === t.length ? function (e, n) {
                                t[0](e, n || d);
                            } : t.reduce(function (t, e) {
                                return function (n, r) {
                                    return void 0 === r && (r = d), t(n, function (t) {
                                        return null == e ? void 0 : e(t, r);
                                    });
                                };
                            });
                        }([function (t) {
                            n.send({ url: n.strategy.getUploadUrl(), data: t, method: "post", contentType: "application/json;charset=UTF-8" }, function () {
                                var e = n.config.onReportSuccess;"function" == typeof e && e(JSON.stringify(t.events));
                            }, function () {
                                var e = n.config.onReportFail;"function" == typeof e && e(JSON.stringify(t.events));
                            });
                        }]), function (t, e) {
                            if (!t) throw e instanceof Error ? e : new Error(e);
                        }(Boolean(t.appkey), "appkey must be initial"), this.config = _e({}, t);
                    }return t.prototype.onUserAction = function (t, e) {
                        this.preReport(t, e, !1);
                    }, t.prototype.onDirectUserAction = function (t, e) {
                        this.preReport(t, e, !0);
                    }, t.prototype.preReport = function (t, e, n) {
                        t ? this.strategy.isEventUpOnOff() && (this.strategy.isBlackEvent(t) || this.strategy.isSampleEvent(t) || this.onReport(t, e, n)) : this.errorReport.reportError("602", " no eventCode");
                    }, t.prototype.addAdditionalParams = function (t) {
                        for (var e = 0, n = Object.keys(t); e < n.length; e++) {
                            var r = n[e];this.additionalParams[r] = t[r];
                        }
                    }, t.prototype.setChannelId = function (t) {
                        this.commonInfo.channelID = String(t);
                    }, t.prototype.setOpenId = function (t) {
                        this.commonInfo.openid = String(t);
                    }, t.prototype.setUnionid = function (t) {
                        this.commonInfo.unid = String(t);
                    }, t.prototype.getDeviceId = function () {
                        return this.commonInfo.deviceId;
                    }, t.prototype.getCommonInfo = function () {
                        return this.commonInfo;
                    }, t.prototype.removeSendingId = function (t) {
                        try {
                            var e = JSON.parse(this.storage.getItem(a)),
                                n = e.indexOf(t);-1 != n && (e.splice(n, 1), this.storage.setItem(a, JSON.stringify(e)));
                        } catch (t) {}
                    }, t;
                }(),
                    y = function () {
                    function t(t, e, n, r) {
                        this.requestParams = {}, this.network = r, this.requestParams.attaid = "00400014144", this.requestParams.token = "6478159937", this.requestParams.product_id = t.appkey, this.requestParams.platform = n, this.requestParams.uin = e.deviceId, this.requestParams.model = "", this.requestParams.os = n, this.requestParams.app_version = t.appVersion, this.requestParams.sdk_version = e.sdkVersion, this.requestParams.error_stack = "";
                    }return t.prototype.reportError = function (t, e) {
                        this.requestParams._dc = Math.random(), this.requestParams.error_msg = e, this.requestParams.error_code = t, this.network.get("https://h.trace.qq.com/kv", { params: this.requestParams }).catch(function (t) {});
                    }, t;
                }(),
                    g = function () {
                    function t(t, e, n, r) {
                        this.strategy = { isEventUpOnOff: !0, httpsUploadUrl: "https://otheve.beacon.qq.com/analytics/v2_upload", requestInterval: 30, blacklist: [], samplelist: [] }, this.realSample = {}, this.appkey = "", this.appkey = t.appkey, this.storage = n;try {
                            var o = JSON.parse(this.storage.getItem(u));o && this.processData(o);
                        } catch (t) {}this.needRequestConfig() && this.requestConfig(t.appVersion, e, r);
                    }return t.prototype.requestConfig = function (t, e, n) {
                        var r = this;this.storage.setItem(c, Date.now().toString()), n.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig", { platformId: "undefined" == typeof wx ? "3" : "4", mainAppKey: this.appkey, appVersion: t, sdkVersion: e.sdkVersion, osVersion: e.userAgent, model: "", packageName: "", params: { A3: e.deviceId } }).then(function (t) {
                            if (0 == t.data.ret) try {
                                var e = JSON.parse(t.data.beaconConfig);e && (r.processData(e), r.storage.setItem(u, t.data.beaconConfig));
                            } catch (t) {} else r.processData(null), r.storage.setItem(u, "");
                        }).catch(function (t) {});
                    }, t.prototype.processData = function (t) {
                        var e, n, r, o, i;this.strategy.isEventUpOnOff = null !== (e = null == t ? void 0 : t.isEventUpOnOff) && void 0 !== e ? e : this.strategy.isEventUpOnOff, this.strategy.httpsUploadUrl = null !== (n = null == t ? void 0 : t.httpsUploadUrl) && void 0 !== n ? n : this.strategy.httpsUploadUrl, this.strategy.requestInterval = null !== (r = null == t ? void 0 : t.requestInterval) && void 0 !== r ? r : this.strategy.requestInterval, this.strategy.blacklist = null !== (o = null == t ? void 0 : t.blacklist) && void 0 !== o ? o : this.strategy.blacklist, this.strategy.samplelist = null !== (i = null == t ? void 0 : t.samplelist) && void 0 !== i ? i : this.strategy.samplelist;for (var s = 0, a = this.strategy.samplelist; s < a.length; s++) {
                            var u = a[s].split(",");2 == u.length && (this.realSample[u[0]] = u[1]);
                        }
                    }, t.prototype.needRequestConfig = function () {
                        var t = Number(this.storage.getItem(c));return Date.now() - t > 60 * this.strategy.requestInterval * 1e3;
                    }, t.prototype.getUploadUrl = function () {
                        return this.strategy.httpsUploadUrl + "?appkey=" + this.appkey;
                    }, t.prototype.isBlackEvent = function (t) {
                        return -1 != this.strategy.blacklist.indexOf(t);
                    }, t.prototype.isEventUpOnOff = function () {
                        return this.strategy.isEventUpOnOff;
                    }, t.prototype.isSampleEvent = function (t) {
                        return !!Object.prototype.hasOwnProperty.call(this.realSample, t) && this.realSample[t] < Math.floor(Math.random() * Math.floor(1e4));
                    }, t;
                }(),
                    m = "session_storage_key",
                    w = function () {
                    function t(t, e, n) {
                        this.beacon = n, this.storage = t, this.duration = e, this.appkey = n.config.appkey;
                    }return t.prototype.getSession = function () {
                        var t = this.storage.getItem(m);if (!t) return this.createSession();var e = JSON.parse(t) || { sessionId: void 0, sessionStart: void 0 };if (!e.sessionId || !e.sessionStart) return this.createSession();var n = Number(this.storage.getItem(s));return Date.now() - n > this.duration ? this.createSession() : { sessionId: e.sessionId, sessionStart: e.sessionStart };
                    }, t.prototype.createSession = function () {
                        var t = Date.now(),
                            e = { sessionId: this.appkey + "_" + t.toString(), sessionStart: t };this.storage.setItem(m, JSON.stringify(e)), this.storage.setItem(s, t.toString());var n = "is_new_user",
                            r = this.storage.getItem(n);return this.beacon.onDirectUserAction("rqd_applaunched", { A21: r ? "N" : "Y" }), this.storage.setItem(n, JSON.stringify(!1)), e;
                    }, t;
                }();function b() {
                    var t = navigator.userAgent,
                        e = t.indexOf("compatible") > -1 && t.indexOf("MSIE") > -1,
                        n = t.indexOf("Edge") > -1 && !e,
                        r = t.indexOf("Trident") > -1 && t.indexOf("rv:11.0") > -1;if (e) {
                        new RegExp("MSIE (\\d+\\.\\d+);").test(t);var o = parseFloat(RegExp.$1);return 7 == o ? 7 : 8 == o ? 8 : 9 == o ? 9 : 10 == o ? 10 : 6;
                    }return n ? -2 : r ? 11 : -1;
                }var _S = function S() {
                    return (_S = Object.assign || function (t) {
                        for (var e, n = 1, r = arguments.length; n < r; n++) {
                            for (var o in e = arguments[n]) {
                                Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
                            }
                        }return t;
                    }).apply(this, arguments);
                };function I(t) {
                    var e = new Image(1, 1),
                        n = _S({ attaid: "0f400053130", token: "6552374442", comps: "@tencent/tvf-indexed-db", version: "1.0.2", ua: navigator.userAgent, url: location.href, _dc: Math.random() }, t),
                        r = Object.keys(n).map(function (t) {
                        return t + "=" + encodeURIComponent(n[t]);
                    }).join("&");e.src = "https://h.trace.qq.com/kv?" + r;
                }var O,
                    k,
                    E,
                    _,
                    x,
                    P = function () {
                    function t(t, e) {
                        void 0 === e && (e = {}), this.reportOptions = {}, this.config = t, this.reportOptions = e;
                    }return t.canUseDB = function () {
                        return !!(null === window || void 0 === window ? void 0 : window.indexedDB);
                    }, t.prototype.openDB = function () {
                        var e = this;return new Promise(function (n, r) {
                            if (!t.canUseDB()) return r({ message: "当前不支持 indexeddb" });var o = e.config,
                                i = o.name,
                                s = o.version,
                                a = o.stores,
                                u = indexedDB.open(i, s);u.onsuccess = function () {
                                e.db = u.result, n(), I(_S({ result: 1, func: "open", params: JSON.stringify(e.config) }, e.reportOptions));
                            }, u.onerror = function (t) {
                                var n, o;r(t), I(_S({ result: 0, func: "open", params: JSON.stringify(e.config), error_msg: null === (o = null === (n = t.target) || void 0 === n ? void 0 : n.error) || void 0 === o ? void 0 : o.message }, e.reportOptions));
                            }, u.onupgradeneeded = function () {
                                e.db = u.result;try {
                                    null == a || a.forEach(function (t) {
                                        e.createStore(t);
                                    });
                                } catch (t) {
                                    I(_S({ result: 0, func: "open", params: JSON.stringify(e.config), error_msg: t.message }, e.reportOptions)), r(t);
                                }
                            };
                        });
                    }, t.prototype.useStore = function (t) {
                        return this.storeName = t, this;
                    }, t.prototype.deleteDB = function () {
                        var t = this;return this.closeDB(), new Promise(function (e, n) {
                            var r = indexedDB.deleteDatabase(t.config.name);r.onsuccess = function () {
                                return e();
                            }, r.onerror = n;
                        });
                    }, t.prototype.closeDB = function () {
                        var t;null === (t = this.db) || void 0 === t || t.close(), this.db = null;
                    }, t.prototype.getStoreCount = function () {
                        var t = this;return new Promise(function (e, n) {
                            var r = t.getStore("readonly").count();r.onsuccess = function () {
                                return e(r.result);
                            }, r.onerror = n;
                        });
                    }, t.prototype.clearStore = function () {
                        var t = this;return new Promise(function (e, n) {
                            var r = t.getStore("readwrite").clear();r.onsuccess = function () {
                                return e();
                            }, r.onerror = n;
                        });
                    }, t.prototype.add = function (t, e) {
                        var n = this;return new Promise(function (r, o) {
                            var i = n.getStore("readwrite").add(t, e);i.onsuccess = function () {
                                r(i.result);
                            }, i.onerror = o;
                        });
                    }, t.prototype.put = function (t, e) {
                        var n = this;return new Promise(function (r, o) {
                            var i = n.getStore("readwrite").put(t, e);i.onsuccess = function () {
                                r(i.result);
                            }, i.onerror = o;
                        });
                    }, t.prototype.getStoreAllData = function () {
                        var t = this;return new Promise(function (e, n) {
                            var r = t.getStore("readonly").openCursor(),
                                o = [];r.onsuccess = function () {
                                var t;if (null === (t = r.result) || void 0 === t ? void 0 : t.value) {
                                    var n = r.result.value;o.push(n), r.result.continue();
                                } else e(o);
                            }, r.onerror = n;
                        });
                    }, t.prototype.getDataRangeByIndex = function (t, e, n, r, o) {
                        var i = this;return new Promise(function (s, a) {
                            var u = i.getStore().index(t),
                                c = IDBKeyRange.bound(e, n, r, o),
                                l = [],
                                p = u.openCursor(c);p.onsuccess = function () {
                                var t;(null === (t = null == p ? void 0 : p.result) || void 0 === t ? void 0 : t.value) ? (l.push(null == p ? void 0 : p.result.value), null == p || p.result.continue()) : s(l);
                            }, p.onerror = a;
                        });
                    }, t.prototype.removeDataByIndex = function (t, e, n, r, o) {
                        var i = this;return new Promise(function (s, a) {
                            var u = i.getStore("readwrite").index(t),
                                c = IDBKeyRange.bound(e, n, r, o),
                                l = u.openCursor(c),
                                p = 0;l.onsuccess = function (t) {
                                var e = t.target.result;e ? (p += 1, e.delete(), e.continue()) : s(p);
                            }, l.onerror = a;
                        });
                    }, t.prototype.createStore = function (t) {
                        var e = t.name,
                            n = t.indexes,
                            r = void 0 === n ? [] : n,
                            o = t.options;if (this.db) {
                            this.db.objectStoreNames.contains(e) && this.db.deleteObjectStore(e);var i = this.db.createObjectStore(e, o);r.forEach(function (t) {
                                i.createIndex(t.indexName, t.keyPath, t.options);
                            });
                        }
                    }, t.prototype.getStore = function (t) {
                        var e;return void 0 === t && (t = "readonly"), null === (e = this.db) || void 0 === e ? void 0 : e.transaction(this.storeName, t).objectStore(this.storeName);
                    }, t;
                }(),
                    D = "event_table_v3",
                    j = "eventId",
                    q = function () {
                    function t(t) {
                        this.isReady = !1, this.taskQueue = Promise.resolve(), this.db = new P({ name: "Beacon_" + t + "_V3", version: 1, stores: [{ name: D, options: { keyPath: j }, indexes: [{ indexName: j, keyPath: j, options: { unique: !0 } }] }] }), this.open();
                    }return t.prototype.setItem = function (t, e) {
                        var n = this;return this.readyExec(function () {
                            return n.db.add({ eventId: t, value: e });
                        });
                    }, t.prototype.getItem = function (t) {
                        return n(this, void 0, void 0, function () {
                            var e = this;return r(this, function (n) {
                                return [2, this.readyExec(function () {
                                    return e.db.getDataRangeByIndex(j, t, t);
                                })];
                            });
                        });
                    }, t.prototype.removeItem = function (t) {
                        var e = this;return this.readyExec(function () {
                            return e.db.removeDataByIndex(j, t, t);
                        });
                    }, t.prototype.updateItem = function (t, e) {
                        var n = this;return this.readyExec(function () {
                            return n.db.put({ eventId: t, value: e });
                        });
                    }, t.prototype.iterate = function (t) {
                        var e = this;return this.readyExec(function () {
                            return e.db.getStoreAllData().then(function (e) {
                                e.forEach(function (e) {
                                    t(e.value);
                                });
                            });
                        });
                    }, t.prototype.open = function () {
                        return n(this, void 0, void 0, function () {
                            var t = this;return r(this, function (e) {
                                switch (e.label) {case 0:
                                        return this.taskQueue = this.taskQueue.then(function () {
                                            return t.db.openDB();
                                        }), [4, this.taskQueue];case 1:
                                        return e.sent(), this.isReady = !0, this.db.useStore(D), [2];}
                            });
                        });
                    }, t.prototype.readyExec = function (t) {
                        return this.isReady ? t() : (this.taskQueue = this.taskQueue.then(function () {
                            return t();
                        }), this.taskQueue);
                    }, t;
                }(),
                    T = function () {
                    function t(t) {
                        this.keyObject = {}, this.storage = t;
                    }return t.prototype.removeItem = function (t) {
                        this.storage.removeItem(t), delete this.keyObject[t];
                    }, t.prototype.setItem = function (t, e) {
                        var n = JSON.stringify(e);this.storage.setItem(t, n), this.keyObject[t] = e;
                    }, t.prototype.iterate = function (t) {
                        for (var e = Object.keys(this.keyObject), n = 0; n < e.length; n++) {
                            var r = this.storage.getItem(e[n]);t(JSON.parse(r));
                        }
                    }, t;
                }(),
                    A = function () {
                    function t(t, e) {
                        var n = b();this.store = n > 0 ? new T(e) : new q(t);
                    }return t.prototype.insertEvent = function (t, e) {
                        return n(this, void 0, void 0, function () {
                            var n, o;return r(this, function (r) {
                                switch (r.label) {case 0:
                                        n = h(t.mapValue), r.label = 1;case 1:
                                        return r.trys.push([1, 3,, 4]), [4, this.store.setItem(n, t)];case 2:
                                        return [2, r.sent()];case 3:
                                        return o = r.sent(), e && e(o, t), [2, Promise.reject()];case 4:
                                        return [2];}
                            });
                        });
                    }, t.prototype.getEvents = function () {
                        return n(this, void 0, void 0, function () {
                            var t;return r(this, function (e) {
                                switch (e.label) {case 0:
                                        t = [], e.label = 1;case 1:
                                        return e.trys.push([1, 3,, 4]), [4, this.store.iterate(function (e) {
                                            t.push(e);
                                        })];case 2:
                                        return e.sent(), [2, Promise.all(t)];case 3:
                                        return e.sent(), [2, Promise.all(t)];case 4:
                                        return [2];}
                            });
                        });
                    }, t.prototype.removeEvent = function (t) {
                        return n(this, void 0, void 0, function () {
                            var e;return r(this, function (n) {
                                switch (n.label) {case 0:
                                        e = h(t.mapValue), n.label = 1;case 1:
                                        return n.trys.push([1, 3,, 4]), [4, this.store.removeItem(e)];case 2:
                                        return [2, n.sent()];case 3:
                                        return n.sent(), [2, Promise.reject()];case 4:
                                        return [2];}
                            });
                        });
                    }, t;
                }(),
                    _U = function U() {
                    return (_U = Object.assign || function (t) {
                        for (var e, n = 1, r = arguments.length; n < r; n++) {
                            for (var o in e = arguments[n]) {
                                Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
                            }
                        }return t;
                    }).apply(this, arguments);
                };function C(t) {
                    try {
                        return decodeURIComponent(t.replace(/\+/g, " "));
                    } catch (t) {
                        return null;
                    }
                }function N(t, e) {
                    var n = [null, void 0, "", NaN].includes(t);if (e.isSkipEmpty && n) return null;var r = !e.isSkipEmpty && n ? "" : t;try {
                        return e.encode ? encodeURIComponent(r) : r;
                    } catch (t) {
                        return null;
                    }
                }function R(t) {
                    var e = t.split("#"),
                        n = e[0],
                        r = e[1],
                        o = void 0 === r ? "" : r,
                        i = n.split("?"),
                        s = i[0],
                        a = i[1],
                        u = void 0 === a ? "" : a,
                        c = C(o),
                        l = Object.create(null);return u.split("&").forEach(function (t) {
                        var e = t.split("="),
                            n = e[0],
                            r = e[1],
                            o = void 0 === r ? "" : r,
                            i = C(n),
                            s = C(o);null === i || null === s || "" === i && "" === s || l[i] || (l[i] = s);
                    }), { url: s, query: l, hash: c };
                }function B(t, e) {
                    void 0 === e && (e = { encode: !0, isSkipEmpty: !1 });var n = t.url,
                        r = t.query,
                        o = void 0 === r ? {} : r,
                        i = t.hash,
                        s = n.split("#"),
                        a = s[0],
                        u = s[1],
                        c = void 0 === u ? "" : u,
                        l = a.split("?")[0],
                        p = [],
                        f = N(i || c, e),
                        h = _U(_U({}, R(n).query), o);return Object.keys(h).forEach(function (t) {
                        var n = N(t, e),
                            r = N(h[t], e);null !== n && null !== r && p.push(n + "=" + r);
                    }), l + (p.length ? "?" + p.join("&") : "") + (f ? "#" + f : "");
                }function J(t, e) {
                    return new Promise(function (n, r) {
                        if (e && document.querySelectorAll("script[data-tag=" + e + "]").length) return n();var o = document.createElement("script"),
                            i = _U({ type: "text/javascript", charset: "utf-8" }, t);Object.keys(i).forEach(function (t) {
                            return function (t, e, n) {
                                if (t) return void 0 === n ? t.getAttribute(e) : t.setAttribute(e, n);
                            }(o, t, i[t]);
                        }), e && (o.dataset.tag = e), o.onload = function () {
                            return n();
                        }, o.onreadystatechange = function () {
                            var t = o.readyState;["complete", "loaded"].includes(t) && (o.onreadystatechange = null, n());
                        }, o.onerror = r, document.body.appendChild(o);
                    });
                }!function (t) {
                    t[t.equal = 0] = "equal", t[t.low = -1] = "low", t[t.high = 1] = "high";
                }(O || (O = {})), k = { func: "init", result: 1 }, E = new Image(1, 1), _ = _U({ attaid: "0f400053130", token: "6552374442", comps: "@tencent/tvf-utils", version: "1.0.19", ua: navigator.userAgent, url: location.href, _dc: Math.random() }, k), x = Object.keys(_).map(function (t) {
                    return t + "=" + encodeURIComponent(_[t]);
                }).join("&"), E.src = "https://h.trace.qq.com/kv?" + x;var _V = function V() {
                    return (_V = Object.assign || function (t) {
                        for (var e, n = 1, r = arguments.length; n < r; n++) {
                            for (var o in e = arguments[n]) {
                                Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
                            }
                        }return t;
                    }).apply(this, arguments);
                };function M(t, e, n, r) {
                    return new (n || (n = Promise))(function (o, i) {
                        function s(t) {
                            try {
                                u(r.next(t));
                            } catch (t) {
                                i(t);
                            }
                        }function a(t) {
                            try {
                                u(r.throw(t));
                            } catch (t) {
                                i(t);
                            }
                        }function u(t) {
                            var e;t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n(function (t) {
                                t(e);
                            })).then(s, a);
                        }u((r = r.apply(t, e || [])).next());
                    });
                }function L(t, e) {
                    var n,
                        r,
                        o,
                        i,
                        s = { label: 0, sent: function sent() {
                            if (1 & o[0]) throw o[1];return o[1];
                        }, trys: [], ops: [] };return i = { next: a(0), throw: a(1), return: a(2) }, "function" == typeof Symbol && (i[Symbol.iterator] = function () {
                        return this;
                    }), i;function a(i) {
                        return function (a) {
                            return function (i) {
                                if (n) throw new TypeError("Generator is already executing.");for (; s;) {
                                    try {
                                        if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {case 0:case 1:
                                                o = i;break;case 4:
                                                return s.label++, { value: i[1], done: !1 };case 5:
                                                s.label++, r = i[1], i = [0];continue;case 7:
                                                i = s.ops.pop(), s.trys.pop();continue;default:
                                                if (!((o = (o = s.trys).length > 0 && o[o.length - 1]) || 6 !== i[0] && 2 !== i[0])) {
                                                    s = 0;continue;
                                                }if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                                    s.label = i[1];break;
                                                }if (6 === i[0] && s.label < o[1]) {
                                                    s.label = o[1], o = i;break;
                                                }if (o && s.label < o[2]) {
                                                    s.label = o[2], s.ops.push(i);break;
                                                }o[2] && s.ops.pop(), s.trys.pop();continue;}i = e.call(t, s);
                                    } catch (t) {
                                        i = [6, t], r = 0;
                                    } finally {
                                        n = o = 0;
                                    }
                                }if (5 & i[0]) throw i[1];return { value: i[0] ? i[1] : void 0, done: !0 };
                            }([i, a]);
                        };
                    }
                }function K(t) {
                    var e = new Image(1, 1),
                        n = _V({ attaid: "0f400053130", token: "6552374442", comps: "@tencent/tvf-request", version: "1.1.4", ua: navigator.userAgent, url: location.href, _dc: Math.random() }, t),
                        r = Object.keys(n).map(function (t) {
                        return t + "=" + encodeURIComponent(n[t]);
                    }).join("&");e.src = "https://h.trace.qq.com/kv?" + r;
                }var Q = /^([a-z][a-z\d+\-.]*:)?\/\//i,
                    G = Object.prototype.toString;function F(t) {
                    return M(this, void 0, void 0, function () {
                        var e;return L(this, function (n) {
                            switch (n.label) {case 0:
                                    if (window.fetch) return [2];n.label = 1;case 1:
                                    return n.trys.push([1, 3,, 4]), [4, J({ src: t })];case 2:
                                    return n.sent(), [3, 4];case 3:
                                    throw e = n.sent(), K({ func: "loadPolyfill", result: 0, params: t, error_msg: e.message }), new Error("加载 polyfill " + t + " 失败: " + e.message);case 4:
                                    return [2];}
                        });
                    });
                }var Y = function () {
                    function t() {
                        this.interceptors = [];
                    }return t.prototype.use = function (t, e) {
                        return this.interceptors.push({ resolved: t, rejected: e }), this.interceptors.length - 1;
                    }, t.prototype.traverse = function (t, e) {
                        void 0 === e && (e = !1);var n = Promise.resolve(t);return (e ? Array.prototype.reduceRight : Array.prototype.reduce).call(this.interceptors, function (t, e) {
                            if (e) {
                                var r = e.resolved,
                                    o = e.rejected;n = n.then(r, o);
                            }return t;
                        }, ""), n;
                    }, t.prototype.eject = function (t) {
                        this.interceptors[t] && (this.interceptors[t] = null);
                    }, t;
                }(),
                    z = { defaults: { timeout: 0, method: "GET", cache: "no-cache", mode: "cors", redirect: "follow", credentials: "same-origin" }, headers: { common: { Accept: "application/json, text/plain, */*" }, POST: { "Content-Type": "application/x-www-form-urlencoded" }, PUT: { "Content-Type": "application/x-www-form-urlencoded" }, PATCH: { "Content-Type": "application/x-www-form-urlencoded" } }, baseURL: "", polyfillUrl: "https://vm.gtimg.cn/comps/script/fetch.min.js", interceptors: { request: new Y(), response: new Y() } };function H(t) {
                    return M(this, void 0, void 0, function () {
                        var e, n, r, o, i, s, a, u, c, l, p, f, h, d, v, y;return L(this, function (g) {
                            switch (g.label) {case 0:
                                    return e = z.baseURL, n = z.polyfillUrl, r = z.defaults, o = z.interceptors, [4, F(n)];case 1:
                                    return g.sent(), (i = _V(_V({}, r), t)).headers || (i.headers = function (t) {
                                        var e = z.headers[t] || {};return _V(_V({}, z.headers.common), e);
                                    }(i.method)), [4, o.request.traverse(i, !0)];case 2:
                                    if ((s = g.sent()) instanceof Error) throw s;return s.url = function (t, e) {
                                        return !t || Q.test(e) ? e : t.replace(/\/+$/, "") + "/" + e.replace(/^\/+/, "");
                                    }(e, s.url), a = s.url, u = s.timeout, c = s.params, l = s.method, p = ["GET", "DELETE", "OPTIONS", "HEAD"].includes(void 0 === l ? "GET" : l) && !!c, f = p ? B({ url: a, query: c }) : a, h = [], u && !s.signal && (y = new Promise(function (t) {
                                        d = setTimeout(function () {
                                            t(new Error("timeout"));
                                        }, u);
                                    }), h.push(y), v = new AbortController(), s.signal = v.signal), h.push(fetch(f, s).catch(function (t) {
                                        return t;
                                    })), [2, new Promise(function (t, e) {
                                        Promise.race(h).then(function (t) {
                                            return d && clearTimeout(d), o.response.traverse(t);
                                        }).then(function (n) {
                                            return n instanceof Error ? (null == v || v.abort(), void e(n)) : n.ok ? t(n) : void e(new Error(n.status + " " + n.statusText));
                                        });
                                    })];}
                        });
                    });
                }z.interceptors.request.use(function (t) {
                    return ["Accept", "Content-Type"].forEach(function (e) {
                        return n = e, void ((r = t.headers) && Object.keys(r).forEach(function (t) {
                            t !== n && t.toUpperCase() === n.toUpperCase() && (r[n] = r[t], delete r[t]);
                        }));var n, r;
                    }), function (t) {
                        if ("[object Object]" !== G.call(t)) return !1;var e = Object.getPrototypeOf(t);return null === e || e === Object.prototype;
                    }(t.body) && (t.body = JSON.stringify(t.body), t.headers && (t.headers["Content-Type"] = "application/json;charset=utf-8")), t;
                }), K({ func: "init", result: 1 });var $ = function () {
                    function t(t) {
                        z.interceptors.request.use(function (n) {
                            var r = n.url,
                                o = n.method,
                                i = n.body,
                                s = i;if (t.onReportBeforeSend) {
                                var a = t.onReportBeforeSend({ url: r, method: o, data: i });s = (null == a ? void 0 : a.data) || null;
                            }if ("GET" !== o && !s) throw new Error("No data for sdk, cancel.");return _e(_e({}, n), { body: s });
                        });
                    }return t.prototype.get = function (t, o) {
                        return n(this, void 0, void 0, function () {
                            var n, i;return r(this, function (r) {
                                switch (r.label) {case 0:
                                        return [4, H(_e({ url: t }, o))];case 1:
                                        return [4, (n = r.sent()).json()];case 2:
                                        return i = r.sent(), [2, Promise.resolve({ data: i, status: n.status, statusText: n.statusText, headers: n.headers })];}
                            });
                        });
                    }, t.prototype.post = function (t, o, i) {
                        return n(this, void 0, void 0, function () {
                            var n, s;return r(this, function (r) {
                                switch (r.label) {case 0:
                                        return [4, H(_e({ url: t, body: o, method: "POST" }, i))];case 1:
                                        return [4, (n = r.sent()).json()];case 2:
                                        return s = r.sent(), [2, Promise.resolve({ data: s, status: n.status, statusText: n.statusText, headers: n.headers })];}
                            });
                        });
                    }, t;
                }(),
                    W = function () {
                    function t(t) {
                        this.appkey = t;
                    }return t.prototype.getItem = function (t) {
                        try {
                            return window.localStorage.getItem(this.getStoreKey(t));
                        } catch (t) {
                            return "";
                        }
                    }, t.prototype.removeItem = function (t) {
                        try {
                            window.localStorage.removeItem(this.getStoreKey(t));
                        } catch (t) {}
                    }, t.prototype.setItem = function (t, e) {
                        try {
                            window.localStorage.setItem(this.getStoreKey(t), e);
                        } catch (t) {}
                    }, t.prototype.setSessionItem = function (t, e) {
                        try {
                            window.sessionStorage.setItem(this.getStoreKey(t), e);
                        } catch (t) {}
                    }, t.prototype.getSessionItem = function (t) {
                        try {
                            return window.sessionStorage.getItem(this.getStoreKey(t));
                        } catch (t) {
                            return "";
                        }
                    }, t.prototype.getStoreKey = function (t) {
                        return o + this.appkey + "_" + t;
                    }, t.prototype.createDeviceId = function () {
                        try {
                            var t = window.localStorage.getItem(i);return t || (t = function (t) {
                                for (var e = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789", n = "", r = 0; r < t; r++) {
                                    n += e.charAt(Math.floor(Math.random() * e.length));
                                }return n;
                            }(32), window.localStorage.setItem(i, t)), t;
                        } catch (t) {
                            return "";
                        }
                    }, t.prototype.clear = function () {
                        try {
                            for (var t = window.localStorage.length, e = 0; e < t; e++) {
                                var n = window.localStorage.key(e);(null == n ? void 0 : n.substr(0, 9)) == o && window.localStorage.removeItem(n);
                            }
                        } catch (t) {}
                    }, t;
                }(),
                    X = "logid_start",
                    Z = "4.4.2-web";return function (n) {
                    function r(t) {
                        var e = n.call(this, t) || this;e.send = function (t, n, r) {
                            e.storage.setItem(s, Date.now().toString()), e.network.post(e.strategy.getUploadUrl(), t.data).then(function (r) {
                                var o;100 == (null === (o = null == r ? void 0 : r.data) || void 0 === o ? void 0 : o.result) ? e.delayTime = 1e3 * r.data.delayTime : e.delayTime = 0, n && n(t.data), t.data.events.forEach(function (t) {
                                    e.store.removeEvent(t).then(function () {
                                        e.removeSendingId(h(t.mapValue));
                                    });
                                });
                            }).catch(function (n) {
                                var o = t.data.events;e.errorReport.reportError(n.code ? n.code.toString() : "600", n.message), r && r(t.data), o.forEach(function (t) {
                                    e.store.insertEvent(t, function (t, n) {
                                        t && e.errorReport.reportError("604", "insertEvent fail!"), e.removeSendingId(h(n.mapValue));
                                    });
                                });
                            });
                        };var r = b();return e.isUnderIE8 = r > 0 && r < 8, e.isUnderIE8 || (e.isUnderIE = r > 0, e.network = new $(t), e.storage = new W(t.appkey), e.initCommonInfo(t), e.store = new A(t.appkey, e.storage), e.errorReport = new y(e.config, e.commonInfo, "web", e.network), e.strategy = new g(e.config, e.commonInfo, e.storage, e.network), e.logidStartTime = e.storage.getItem(X), e.logidStartTime || (e.logidStartTime = Date.now().toString(), e.storage.setItem(X, e.logidStartTime)), e.isSameYear(e.logidStartTime) || e.storage.clear(), e.initSession(t), e.onDirectUserAction("rqd_js_init", {}), setTimeout(function () {
                            return e.lifeCycle.emit("init");
                        }, 0), e.initDelayTime = t.delay ? t.delay : 1e3, e.cycleTask(e.initDelayTime)), e;
                    }return function (e, n) {
                        if ("function" != typeof n && null !== n) throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");function r() {
                            this.constructor = e;
                        }_t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
                    }(r, n), r.prototype.initSession = function (t) {
                        var e = 18e5;t.sessionDuration && t.sessionDuration > 3e4 && (e = t.sessionDuration), this.beaconSession = new w(this.storage, e, this);
                    }, r.prototype.initCommonInfo = function (t) {
                        var e = Number(this.storage.getItem(s));try {
                            var n = JSON.parse(this.storage.getItem(a));(Date.now() - e > 3e4 || !n) && this.storage.setItem(a, JSON.stringify([]));
                        } catch (t) {}var r = [window.screen.width, window.screen.height];window.devicePixelRatio && r.push(window.devicePixelRatio), this.commonInfo = { deviceId: this.storage.createDeviceId(), language: navigator && navigator.language || "zh_CN", query: window.location.search, userAgent: navigator.userAgent, pixel: r.join("*"), channelID: t.channelID ? String(t.channelID) : "", openid: t.openid ? String(t.openid) : "", unid: t.unionid ? String(t.unionid) : "", sdkVersion: Z }, this.config.appVersion = t.versionCode ? String(t.versionCode) : "", this.config.strictMode = t.strictMode;
                    }, r.prototype.cycleTask = function (t) {
                        var e = this;setTimeout(function () {
                            e.store.getEvents().then(function (t) {
                                var n = [],
                                    r = JSON.parse(e.storage.getItem(a));r || (r = []), t && t.forEach(function (t) {
                                    var e = h(t.mapValue);-1 == r.indexOf(e) && (n.push(t), r.push(e));
                                }), 0 != n.length && (e.storage.setItem(a, JSON.stringify(r)), e._normalLogPipeline(e.assembleData(n)));
                            }).catch(function (t) {}), e.cycleTask(0 == e.delayTime ? e.initDelayTime : e.delayTime);
                        }, t);
                    }, r.prototype.onReport = function (t, e, n) {
                        var r = this;if (this.isUnderIE8) this.errorReport.reportError("601", "UnderIE8");else {
                            var o = this.generateData(t, e, n);if (n && 0 == this.delayTime) this._normalLogPipeline(this.assembleData(o));else {
                                var i = o.shift();i && this.store.insertEvent(i, function (t) {
                                    t && r.errorReport.reportError("604", "insertEvent fail!");
                                });
                            }
                        }
                    }, r.prototype.onSendBeacon = function (t, e) {
                        if (this.isUnderIE) this.errorReport.reportError("605", "UnderIE");else {
                            var n = this.assembleData(this.generateData(t, e, !0));"function" == typeof navigator.sendBeacon && navigator.sendBeacon(this.strategy.getUploadUrl(), JSON.stringify(n));
                        }
                    }, r.prototype.generateData = function (t, n, r) {
                        var o = [],
                            i = "4.4.2-web_" + (r ? "direct_log_id" : "normal_log_id"),
                            s = Number(this.storage.getItem(i));return s = s || 1, n = _e(_e({}, n), { A99: r ? "Y" : "N", A100: s.toString(), A72: Z, A88: this.logidStartTime }), s++, this.storage.setItem(i, s.toString()), o.push({ eventCode: t, eventTime: Date.now().toString(), mapValue: p(n, this.config.strictMode) }), o;
                    }, r.prototype.assembleData = function (t) {
                        var n = this.beaconSession.getSession();return { appVersion: this.config.appVersion ? f(this.config.appVersion) : "", sdkId: "js", sdkVersion: Z, mainAppKey: this.config.appkey, platformId: 3, common: p(_e(_e({}, this.additionalParams), { A2: this.commonInfo.deviceId, A8: this.commonInfo.openid, A12: this.commonInfo.language, A17: this.commonInfo.pixel, A23: this.commonInfo.channelID, A50: this.commonInfo.unid, A76: n.sessionId, A101: this.commonInfo.userAgent, A102: window.location.href, A104: document.referrer, A119: this.commonInfo.query }), !1), events: t };
                    }, r.prototype.isSameYear = function (t) {
                        var e = Date.now() - (Number.parseFloat ? Number.parseFloat(t) : Number(t));return !(Math.floor(e / 864e5) >= 365);
                    }, r;
                }(v);
            });
        }, {}], 2: [function (require, module, exports) {
            var DOCUMENT_NODE_TYPE = 9;

            /**
             * A polyfill for Element.matches()
             */
            if (typeof Element !== 'undefined' && !Element.prototype.matches) {
                var proto = Element.prototype;

                proto.matches = proto.matchesSelector || proto.mozMatchesSelector || proto.msMatchesSelector || proto.oMatchesSelector || proto.webkitMatchesSelector;
            }

            /**
             * Finds the closest parent that matches a selector.
             *
             * @param {Element} element
             * @param {String} selector
             * @return {Function}
             */
            function closest(element, selector) {
                while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {
                    if (typeof element.matches === 'function' && element.matches(selector)) {
                        return element;
                    }
                    element = element.parentNode;
                }
            }

            module.exports = closest;
        }, {}], 3: [function (require, module, exports) {
            var closest = require('./closest');

            /**
             * Delegates event to a selector.
             *
             * @param {Element} element
             * @param {String} selector
             * @param {String} type
             * @param {Function} callback
             * @param {Boolean} useCapture
             * @return {Object}
             */
            function _delegate(element, selector, type, callback, useCapture) {
                var listenerFn = listener.apply(this, arguments);

                element.addEventListener(type, listenerFn, useCapture);

                return {
                    destroy: function destroy() {
                        element.removeEventListener(type, listenerFn, useCapture);
                    }
                };
            }

            /**
             * Delegates event to a selector.
             *
             * @param {Element|String|Array} [elements]
             * @param {String} selector
             * @param {String} type
             * @param {Function} callback
             * @param {Boolean} useCapture
             * @return {Object}
             */
            function delegate(elements, selector, type, callback, useCapture) {
                // Handle the regular Element usage
                if (typeof elements.addEventListener === 'function') {
                    return _delegate.apply(null, arguments);
                }

                // Handle Element-less usage, it defaults to global delegation
                if (typeof type === 'function') {
                    // Use `document` as the first parameter, then apply arguments
                    // This is a short way to .unshift `arguments` without running into deoptimizations
                    return _delegate.bind(null, document).apply(null, arguments);
                }

                // Handle Selector-based usage
                if (typeof elements === 'string') {
                    elements = document.querySelectorAll(elements);
                }

                // Handle Array-like based usage
                return Array.prototype.map.call(elements, function (element) {
                    return _delegate(element, selector, type, callback, useCapture);
                });
            }

            /**
             * Finds closest match and invokes callback.
             *
             * @param {Element} element
             * @param {String} selector
             * @param {String} type
             * @param {Function} callback
             * @return {Function}
             */
            function listener(element, selector, type, callback) {
                return function (e) {
                    e.delegateTarget = closest(e.target, selector);

                    if (e.delegateTarget) {
                        callback.call(element, e);
                    }
                };
            }

            module.exports = delegate;
        }, { "./closest": 2 }], 4: [function (require, module, exports) {
            function polyfill(window) {
                var ElementPrototype = window.Element.prototype;

                if (typeof ElementPrototype.matches !== 'function') {
                    ElementPrototype.matches = ElementPrototype.msMatchesSelector || ElementPrototype.mozMatchesSelector || ElementPrototype.webkitMatchesSelector || function matches(selector) {
                        var element = this;
                        var elements = (element.document || element.ownerDocument).querySelectorAll(selector);
                        var index = 0;

                        while (elements[index] && elements[index] !== element) {
                            ++index;
                        }

                        return Boolean(elements[index]);
                    };
                }

                if (typeof ElementPrototype.closest !== 'function') {
                    ElementPrototype.closest = function closest(selector) {
                        var element = this;

                        while (element && element.nodeType === 1) {
                            if (element.matches(selector)) {
                                return element;
                            }

                            element = element.parentNode;
                        }

                        return null;
                    };
                }
            }

            module.exports = polyfill;
        }, {}], 5: [function (require, module, exports) {
            // Copyright Joyent, Inc. and other Node contributors.
            //
            // Permission is hereby granted, free of charge, to any person obtaining a
            // copy of this software and associated documentation files (the
            // "Software"), to deal in the Software without restriction, including
            // without limitation the rights to use, copy, modify, merge, publish,
            // distribute, sublicense, and/or sell copies of the Software, and to permit
            // persons to whom the Software is furnished to do so, subject to the
            // following conditions:
            //
            // The above copyright notice and this permission notice shall be included
            // in all copies or substantial portions of the Software.
            //
            // THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
            // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
            // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
            // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
            // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
            // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
            // USE OR OTHER DEALINGS IN THE SOFTWARE.

            'use strict';

            // If obj.hasOwnProperty has been overridden, then calling
            // obj.hasOwnProperty(prop) will break.
            // See: https://github.com/joyent/node/issues/1707

            function hasOwnProperty(obj, prop) {
                return Object.prototype.hasOwnProperty.call(obj, prop);
            }

            module.exports = function (qs, sep, eq, options) {
                sep = sep || '&';
                eq = eq || '=';
                var obj = {};

                if (typeof qs !== 'string' || qs.length === 0) {
                    return obj;
                }

                var regexp = /\+/g;
                qs = qs.split(sep);

                var maxKeys = 1000;
                if (options && typeof options.maxKeys === 'number') {
                    maxKeys = options.maxKeys;
                }

                var len = qs.length;
                // maxKeys <= 0 means that we should not limit keys count
                if (maxKeys > 0 && len > maxKeys) {
                    len = maxKeys;
                }

                for (var i = 0; i < len; ++i) {
                    var x = qs[i].replace(regexp, '%20'),
                        idx = x.indexOf(eq),
                        kstr,
                        vstr,
                        k,
                        v;

                    if (idx >= 0) {
                        kstr = x.substr(0, idx);
                        vstr = x.substr(idx + 1);
                    } else {
                        kstr = x;
                        vstr = '';
                    }

                    k = decodeURIComponent(kstr);
                    v = decodeURIComponent(vstr);

                    if (!hasOwnProperty(obj, k)) {
                        obj[k] = v;
                    } else if (isArray(obj[k])) {
                        obj[k].push(v);
                    } else {
                        obj[k] = [obj[k], v];
                    }
                }

                return obj;
            };

            var isArray = Array.isArray || function (xs) {
                return Object.prototype.toString.call(xs) === '[object Array]';
            };
        }, {}], 6: [function (require, module, exports) {
            // Copyright Joyent, Inc. and other Node contributors.
            //
            // Permission is hereby granted, free of charge, to any person obtaining a
            // copy of this software and associated documentation files (the
            // "Software"), to deal in the Software without restriction, including
            // without limitation the rights to use, copy, modify, merge, publish,
            // distribute, sublicense, and/or sell copies of the Software, and to permit
            // persons to whom the Software is furnished to do so, subject to the
            // following conditions:
            //
            // The above copyright notice and this permission notice shall be included
            // in all copies or substantial portions of the Software.
            //
            // THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
            // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
            // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
            // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
            // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
            // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
            // USE OR OTHER DEALINGS IN THE SOFTWARE.

            'use strict';

            var stringifyPrimitive = function stringifyPrimitive(v) {
                switch (typeof v === "undefined" ? "undefined" : _typeof(v)) {
                    case 'string':
                        return v;

                    case 'boolean':
                        return v ? 'true' : 'false';

                    case 'number':
                        return isFinite(v) ? v : '';

                    default:
                        return '';
                }
            };

            module.exports = function (obj, sep, eq, name) {
                sep = sep || '&';
                eq = eq || '=';
                if (obj === null) {
                    obj = undefined;
                }

                if ((typeof obj === "undefined" ? "undefined" : _typeof(obj)) === 'object') {
                    return map(objectKeys(obj), function (k) {
                        var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
                        if (isArray(obj[k])) {
                            return map(obj[k], function (v) {
                                return ks + encodeURIComponent(stringifyPrimitive(v));
                            }).join(sep);
                        } else {
                            return ks + encodeURIComponent(stringifyPrimitive(obj[k]));
                        }
                    }).join(sep);
                }

                if (!name) return '';
                return encodeURIComponent(stringifyPrimitive(name)) + eq + encodeURIComponent(stringifyPrimitive(obj));
            };

            var isArray = Array.isArray || function (xs) {
                return Object.prototype.toString.call(xs) === '[object Array]';
            };

            function map(xs, f) {
                if (xs.map) return xs.map(f);
                var res = [];
                for (var i = 0; i < xs.length; i++) {
                    res.push(f(xs[i], i));
                }
                return res;
            }

            var objectKeys = Object.keys || function (obj) {
                var res = [];
                for (var key in obj) {
                    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);
                }
                return res;
            };
        }, {}], 7: [function (require, module, exports) {
            'use strict';

            exports.decode = exports.parse = require('./decode');
            exports.encode = exports.stringify = require('./encode');
        }, { "./decode": 5, "./encode": 6 }], 8: [function (require, module, exports) {
            !function (t, e) {
                "object" == (typeof exports === "undefined" ? "undefined" : _typeof(exports)) && "object" == (typeof module === "undefined" ? "undefined" : _typeof(module)) ? module.exports = e() : "function" == typeof define && define.amd ? define("scrollMonitor", [], e) : "object" == (typeof exports === "undefined" ? "undefined" : _typeof(exports)) ? exports.scrollMonitor = e() : t.scrollMonitor = e();
            }(this, function () {
                return function (t) {
                    function e(o) {
                        if (i[o]) return i[o].exports;var s = i[o] = { exports: {}, id: o, loaded: !1 };return t[o].call(s.exports, s, s.exports, e), s.loaded = !0, s.exports;
                    }var i = {};return e.m = t, e.c = i, e.p = "", e(0);
                }([function (t, e, i) {
                    "use strict";
                    var o = i(1),
                        s = o.isInBrowser,
                        n = i(2),
                        r = new n(s ? document.body : null);r.setStateFromDOM(null), r.listenToDOM(), s && (window.scrollMonitor = r), t.exports = r;
                }, function (t, e) {
                    "use strict";
                    e.VISIBILITYCHANGE = "visibilityChange", e.ENTERVIEWPORT = "enterViewport", e.FULLYENTERVIEWPORT = "fullyEnterViewport", e.EXITVIEWPORT = "exitViewport", e.PARTIALLYEXITVIEWPORT = "partiallyExitViewport", e.LOCATIONCHANGE = "locationChange", e.STATECHANGE = "stateChange", e.eventTypes = [e.VISIBILITYCHANGE, e.ENTERVIEWPORT, e.FULLYENTERVIEWPORT, e.EXITVIEWPORT, e.PARTIALLYEXITVIEWPORT, e.LOCATIONCHANGE, e.STATECHANGE], e.isOnServer = "undefined" == typeof window, e.isInBrowser = !e.isOnServer, e.defaultOffsets = { top: 0, bottom: 0 };
                }, function (t, e, i) {
                    "use strict";
                    function o(t, e) {
                        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
                    }function s(t) {
                        return c ? 0 : t === document.body ? window.innerHeight || document.documentElement.clientHeight : t.clientHeight;
                    }function n(t) {
                        return c ? 0 : t === document.body ? Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.documentElement.clientHeight) : t.scrollHeight;
                    }function r(t) {
                        return c ? 0 : t === document.body ? window.pageYOffset || document.documentElement && document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop;
                    }var h = i(1),
                        c = h.isOnServer,
                        a = h.isInBrowser,
                        l = h.eventTypes,
                        p = i(3),
                        u = !1;if (a) try {
                        var w = Object.defineProperty({}, "passive", { get: function get() {
                                u = !0;
                            } });window.addEventListener("test", null, w);
                    } catch (t) {}var d = !!u && { capture: !1, passive: !0 },
                        f = function () {
                        function t(e, i) {
                            function h() {
                                if (a.viewportTop = r(e), a.viewportBottom = a.viewportTop + a.viewportHeight, a.documentHeight = n(e), a.documentHeight !== p) {
                                    for (u = a.watchers.length; u--;) {
                                        a.watchers[u].recalculateLocation();
                                    }p = a.documentHeight;
                                }
                            }function c() {
                                for (w = a.watchers.length; w--;) {
                                    a.watchers[w].update();
                                }for (w = a.watchers.length; w--;) {
                                    a.watchers[w].triggerCallbacks();
                                }
                            }o(this, t);var a = this;this.item = e, this.watchers = [], this.viewportTop = null, this.viewportBottom = null, this.documentHeight = n(e), this.viewportHeight = s(e), this.DOMListener = function () {
                                t.prototype.DOMListener.apply(a, arguments);
                            }, this.eventTypes = l, i && (this.containerWatcher = i.create(e));var p, u, w;this.update = function () {
                                h(), c();
                            }, this.recalculateLocations = function () {
                                this.documentHeight = 0, this.update();
                            };
                        }return t.prototype.listenToDOM = function () {
                            a && (window.addEventListener ? (this.item === document.body ? window.addEventListener("scroll", this.DOMListener, d) : this.item.addEventListener("scroll", this.DOMListener, d), window.addEventListener("resize", this.DOMListener)) : (this.item === document.body ? window.attachEvent("onscroll", this.DOMListener) : this.item.attachEvent("onscroll", this.DOMListener), window.attachEvent("onresize", this.DOMListener)), this.destroy = function () {
                                window.addEventListener ? (this.item === document.body ? (window.removeEventListener("scroll", this.DOMListener, d), this.containerWatcher.destroy()) : this.item.removeEventListener("scroll", this.DOMListener, d), window.removeEventListener("resize", this.DOMListener)) : (this.item === document.body ? (window.detachEvent("onscroll", this.DOMListener), this.containerWatcher.destroy()) : this.item.detachEvent("onscroll", this.DOMListener), window.detachEvent("onresize", this.DOMListener));
                            });
                        }, t.prototype.destroy = function () {}, t.prototype.DOMListener = function (t) {
                            this.setStateFromDOM(t);
                        }, t.prototype.setStateFromDOM = function (t) {
                            var e = r(this.item),
                                i = s(this.item),
                                o = n(this.item);this.setState(e, i, o, t);
                        }, t.prototype.setState = function (t, e, i, o) {
                            var s = e !== this.viewportHeight || i !== this.contentHeight;if (this.latestEvent = o, this.viewportTop = t, this.viewportHeight = e, this.viewportBottom = t + e, this.contentHeight = i, s) for (var n = this.watchers.length; n--;) {
                                this.watchers[n].recalculateLocation();
                            }this.updateAndTriggerWatchers(o);
                        }, t.prototype.updateAndTriggerWatchers = function (t) {
                            for (var e = this.watchers.length; e--;) {
                                this.watchers[e].update();
                            }for (e = this.watchers.length; e--;) {
                                this.watchers[e].triggerCallbacks(t);
                            }
                        }, t.prototype.createCustomContainer = function () {
                            return new t();
                        }, t.prototype.createContainer = function (e) {
                            "string" == typeof e ? e = document.querySelector(e) : e && e.length > 0 && (e = e[0]);var i = new t(e, this);return i.setStateFromDOM(), i.listenToDOM(), i;
                        }, t.prototype.create = function (t, e) {
                            "string" == typeof t ? t = document.querySelector(t) : t && t.length > 0 && (t = t[0]);var i = new p(this, t, e);return this.watchers.push(i), i;
                        }, t.prototype.beget = function (t, e) {
                            return this.create(t, e);
                        }, t;
                    }();t.exports = f;
                }, function (t, e, i) {
                    "use strict";
                    function o(t, e, i) {
                        function o(t, e) {
                            if (0 !== t.length) for (E = t.length; E--;) {
                                y = t[E], y.callback.call(s, e, s), y.isOne && t.splice(E, 1);
                            }
                        }var s = this;this.watchItem = e, this.container = t, i ? i === +i ? this.offsets = { top: i, bottom: i } : this.offsets = { top: i.top || w.top, bottom: i.bottom || w.bottom } : this.offsets = w, this.callbacks = {};for (var d = 0, f = u.length; d < f; d++) {
                            s.callbacks[u[d]] = [];
                        }this.locked = !1;var m, v, b, I, E, y;this.triggerCallbacks = function (t) {
                            switch (this.isInViewport && !m && o(this.callbacks[r], t), this.isFullyInViewport && !v && o(this.callbacks[h], t), this.isAboveViewport !== b && this.isBelowViewport !== I && (o(this.callbacks[n], t), v || this.isFullyInViewport || (o(this.callbacks[h], t), o(this.callbacks[a], t)), m || this.isInViewport || (o(this.callbacks[r], t), o(this.callbacks[c], t))), !this.isFullyInViewport && v && o(this.callbacks[a], t), !this.isInViewport && m && o(this.callbacks[c], t), this.isInViewport !== m && o(this.callbacks[n], t), !0) {case m !== this.isInViewport:case v !== this.isFullyInViewport:case b !== this.isAboveViewport:case I !== this.isBelowViewport:
                                    o(this.callbacks[p], t);}m = this.isInViewport, v = this.isFullyInViewport, b = this.isAboveViewport, I = this.isBelowViewport;
                        }, this.recalculateLocation = function () {
                            if (!this.locked) {
                                var t = this.top,
                                    e = this.bottom;if (this.watchItem.nodeName) {
                                    var i = this.watchItem.style.display;"none" === i && (this.watchItem.style.display = "");for (var s = 0, n = this.container; n.containerWatcher;) {
                                        s += n.containerWatcher.top - n.containerWatcher.container.viewportTop, n = n.containerWatcher.container;
                                    }var r = this.watchItem.getBoundingClientRect();this.top = r.top + this.container.viewportTop - s, this.bottom = r.bottom + this.container.viewportTop - s, "none" === i && (this.watchItem.style.display = i);
                                } else this.watchItem === +this.watchItem ? this.watchItem > 0 ? this.top = this.bottom = this.watchItem : this.top = this.bottom = this.container.documentHeight - this.watchItem : (this.top = this.watchItem.top, this.bottom = this.watchItem.bottom);this.top -= this.offsets.top, this.bottom += this.offsets.bottom, this.height = this.bottom - this.top, void 0 === t && void 0 === e || this.top === t && this.bottom === e || o(this.callbacks[l], null);
                            }
                        }, this.recalculateLocation(), this.update(), m = this.isInViewport, v = this.isFullyInViewport, b = this.isAboveViewport, I = this.isBelowViewport;
                    }var s = i(1),
                        n = s.VISIBILITYCHANGE,
                        r = s.ENTERVIEWPORT,
                        h = s.FULLYENTERVIEWPORT,
                        c = s.EXITVIEWPORT,
                        a = s.PARTIALLYEXITVIEWPORT,
                        l = s.LOCATIONCHANGE,
                        p = s.STATECHANGE,
                        u = s.eventTypes,
                        w = s.defaultOffsets;o.prototype = { on: function on(t, e, i) {
                            switch (!0) {case t === n && !this.isInViewport && this.isAboveViewport:case t === r && this.isInViewport:case t === h && this.isFullyInViewport:case t === c && this.isAboveViewport && !this.isInViewport:case t === a && this.isInViewport && this.isAboveViewport:
                                    if (e.call(this, this.container.latestEvent, this), i) return;}if (!this.callbacks[t]) throw new Error("Tried to add a scroll monitor listener of type " + t + ". Your options are: " + u.join(", "));this.callbacks[t].push({ callback: e, isOne: i || !1 });
                        }, off: function off(t, e) {
                            if (!this.callbacks[t]) throw new Error("Tried to remove a scroll monitor listener of type " + t + ". Your options are: " + u.join(", "));for (var i, o = 0; i = this.callbacks[t][o]; o++) {
                                if (i.callback === e) {
                                    this.callbacks[t].splice(o, 1);break;
                                }
                            }
                        }, one: function one(t, e) {
                            this.on(t, e, !0);
                        }, recalculateSize: function recalculateSize() {
                            this.height = this.watchItem.offsetHeight + this.offsets.top + this.offsets.bottom, this.bottom = this.top + this.height;
                        }, update: function update() {
                            this.isAboveViewport = this.top < this.container.viewportTop, this.isBelowViewport = this.bottom > this.container.viewportBottom, this.isInViewport = this.top < this.container.viewportBottom && this.bottom > this.container.viewportTop, this.isFullyInViewport = this.top >= this.container.viewportTop && this.bottom <= this.container.viewportBottom || this.isAboveViewport && this.isBelowViewport;
                        }, destroy: function destroy() {
                            var t = this.container.watchers.indexOf(this),
                                e = this;this.container.watchers.splice(t, 1);for (var i = 0, o = u.length; i < o; i++) {
                                e.callbacks[u[i]].length = 0;
                            }
                        }, lock: function lock() {
                            this.locked = !0;
                        }, unlock: function unlock() {
                            this.locked = !1;
                        } };for (var d = function d(t) {
                        return function (e, i) {
                            this.on.call(this, t, e, i);
                        };
                    }, f = 0, m = u.length; f < m; f++) {
                        var v = u[f];o.prototype[v] = d(v);
                    }t.exports = o;
                }]);
            });
        }, {}], 9: [function (require, module, exports) {
            "use strict";

            Object.defineProperty(exports, "__esModule", { value: true });
            exports.watcher = exports.attr = exports.EXPO_UPDATE_INTERVAL = exports.WATCHER = exports.ATTR = void 0;
            exports.ATTR = {
                'CLICK': 'data-beacon-click',
                'EXPO': 'data-beacon-expo',
                'REPEAT': 'data-beacon-repeat',
                'DISABLED': 'data-beacon-disabled'
            };
            exports.attr = exports.ATTR;
            exports.WATCHER = {
                'EXPO_WATCHER': '_beacon_expo_watcher',
                'LAST_VALUE': '_beacon_last_value',
                'COUNT': '_beacon_count'
            };
            exports.watcher = exports.WATCHER;
            exports.EXPO_UPDATE_INTERVAL = 2000;
        }, {}], 10: [function (require, module, exports) {
            "use strict";
            // 灯塔上报

            var __importDefault = this && this.__importDefault || function (mod) {
                return mod && mod.__esModule ? mod : { "default": mod };
            };
            Object.defineProperty(exports, "__esModule", { value: true });
            var beacon_1 = __importDefault(require("./utils/beacon"));
            module.exports = beacon_1.default;
        }, { "./utils/beacon": 11 }], 11: [function (require, module, exports) {
            "use strict";
            // @description 灯塔上报

            Object.defineProperty(exports, "__esModule", { value: true });
            var config_1 = require("../config");
            var delegation20210913 = '';
            var BeaconAction = require("@tencent/beacon-web-sdk");
            var scrollMonitor = require("scrollmonitor");
            var querystring = require("querystring");
            var delegate = require("delegate");
            require("element-closest");

            var Qqcombeacon = function () {
                function Qqcombeacon(options) {
                    var _this = this;

                    _classCallCheck(this, Qqcombeacon);

                    // 是否是 debug 模式
                    if (typeof options.debug !== "undefined") {
                        this.debug = options.debug;
                    }
                    // 必填参数验证
                    if (!options["appkey"]) throw Error("缺少 appkey");
                    if (!options["projectid"]) throw Error("缺少 projectid");
                    this.reportParams = {};
                    this.env = this.inBrowser() ? true : false;
                    // 监听函数
                    this.listeners = {
                        click: function click(e) {
                            _this.action("click", e.delegateTarget);
                        }
                    };
                    // 监控容器
                    if (options.monitorContainerId) {
                        this.monitorContainerId = options.monitorContainerId;
                    }
                    this.expoAutoUpdate = options.expoAutoUpdate;
                    this.projectid = options.projectid;
                    this.beacon = new BeaconAction({
                        appkey: options.appkey,
                        onReportSuccess: function onReportSuccess(e) {
                            var debug = _this.debug;

                            if (debug) {
                                var callbackParams = JSON.parse(e);
                                _this.debug && _this.debugging(_this.parseDebugParams(callbackParams));
                            }
                        },
                        onReportFail: function onReportFail() {
                            _this.fail();
                        }
                    });
                    this.env && this.init();
                    return this;
                }
                // 获取容器


                _createClass(Qqcombeacon, [{
                    key: "getMonitorContainer",
                    value: function getMonitorContainer() {
                        if (this.monitorContainerId) {
                            var containerElement = document.getElementById(this.monitorContainerId);
                            return scrollMonitor.createContainer(containerElement);
                        }
                        return scrollMonitor;
                    }
                    // 复用参数注入

                }, {
                    key: "inBrowser",

                    // 判断环境
                    value: function inBrowser() {
                        return window && window.document && window.document.body;
                    }
                    // 初始化

                }, {
                    key: "init",
                    value: function init() {
                        var _this2 = this;

                        var expoAutoUpdate = this.expoAutoUpdate,
                            debug = this.debug,
                            debugging = this.debugging;

                        this.bind();
                        this.expo();
                        if (expoAutoUpdate) {
                            var interval = typeof expoAutoUpdate === "number" ? Math.abs(expoAutoUpdate) : config_1.EXPO_UPDATE_INTERVAL;
                            setInterval(function () {
                                _this2.expo();
                            }, interval);
                        }
                        debug && debugging("beancon started");
                    }
                    // 点击函数

                }, {
                    key: "bind",
                    value: function bind() {
                        !delegation20210913 && (delegation20210913 = delegate(window.document.body, "[" + config_1.attr.CLICK + "]", "click", this.listeners.click, false));
                    }
                    // 曝光函数

                }, {
                    key: "expo",
                    value: function expo() {
                        var _this3 = this;

                        var scrollId = this.monitorContainerId ? "#" + this.monitorContainerId : 'body';
                        var expoNodeList = window.document.querySelectorAll(scrollId + " [" + config_1.attr.EXPO + "]");
                        Array.prototype.forEach.call(expoNodeList, function (el) {
                            var elWatcher = el[config_1.watcher.EXPO_WATCHER];
                            if (!elWatcher) {
                                elWatcher = _this3.getMonitorContainer().create(el);
                                elWatcher.enterViewport(function () {
                                    return _this3.action("expo", el);
                                });
                                el[config_1.watcher.EXPO_WATCHER] = elWatcher;
                            }
                        });
                    }
                    // 触发

                }, {
                    key: "update",
                    value: function update() {
                        this.getMonitorContainer().update();
                    }
                    // 不上报检查

                }, {
                    key: "check",
                    value: function check(type, el) {
                        // 01. 已被移除的节点
                        if (el && typeof window.document.body.contains === "function" && window.document.body.contains(el) === false) {
                            return true;
                        }
                        // 02. 无上报参数
                        var value = el.getAttribute(config_1.attr[type.toUpperCase()]);
                        if (!value) return true;
                        // 03. disabled设置
                        if (typeof el.getAttribute(config_1.attr.DISABLED) === "string") return true;
                        // 04. 隐藏元素不曝光
                        var style = window.getComputedStyle(el) || el.style;
                        if (style.display === 'none') {
                            return true;
                        }
                        // 获取上报计数
                        var count = el[config_1.watcher.COUNT] || 0;
                        // 05. 曝光设置上报1次
                        if (type === "expo" && _typeof(el.getAttribute(config_1.attr.REPEAT)) === "object" && count > 0) return true;
                        // 更新上报计数器
                        el[config_1.watcher.COUNT] = count + 1;
                        return false;
                    }
                    // 执行上报

                }, {
                    key: "action",
                    value: function action(type, el) {
                        var _this4 = this;

                        if (this.check(type, el)) return;
                        var value = el.getAttribute(config_1.attr[type.toUpperCase()]);
                        this.reportParams = querystring.parse(value);
                        // 注入参数
                        if (Qqcombeacon.modules.length > 0) {
                            Qqcombeacon.modules.forEach(function (item) {
                                _this4.reportParams = Object.assign(Object.assign({}, _this4.reportParams), item);
                            });
                        }
                        this.beacon.onDirectUserAction(this.projectid, this.reportParams);
                    }
                    // 手动上报方法

                }, {
                    key: "report",
                    value: function report(params) {
                        this.beacon.onDirectUserAction(this.projectid, params);
                    }
                    // 上报失败返回

                }, {
                    key: "fail",
                    value: function fail() {
                        console.error("上报失败");
                    }
                    // 是否开启调试

                }, {
                    key: "debugging",
                    value: function debugging(info) {
                        if (console && console.table) {
                            console.table(info);
                        }
                    }
                    // debug参数解析

                }, {
                    key: "parseDebugParams",
                    value: function parseDebugParams(params) {
                        var _params$ = params[0],
                            eventCode = _params$.eventCode,
                            mapValue = _params$.mapValue;

                        return Object.assign({ eventCode: eventCode }, mapValue);
                    }
                }], [{
                    key: "use",
                    value: function use(module) {
                        Array.isArray(module) ? module.map(function (item) {
                            return Qqcombeacon.use(item);
                        }) : Qqcombeacon.modules.push(module);
                    }
                }]);

                return Qqcombeacon;
            }();
            // 静态属性


            Qqcombeacon.modules = [];
            exports.default = Qqcombeacon;
        }, { "../config": 9, "@tencent/beacon-web-sdk": 1, "delegate": 3, "element-closest": 4, "querystring": 7, "scrollmonitor": 8 }] }, {}, [10])(10);
});